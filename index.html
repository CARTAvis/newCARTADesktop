<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>new CARTA Desktop</title>

  <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">

  <style>
    .flex-container {
      display: flex;
      justify-content: center;
      align-items: center;
    }

    * {
      font-size: 16px;
      font-family: 'Roboto';
    }
  </style>
</head>

<body>
  <!-- <h1>new CARTA Desktop !</h1> -->
  <!-- All of the Node.js APIs are available in this renderer process. -->
  <!-- We are using Node.js <script>document.write(process.versions.node)</script>,
    Chromium <script>document.write(process.versions.chrome)</script>,
    and Electron <script>document.write(process.versions.electron)</script>. -->
  <script>
    const {
      ipcRenderer
    } = require('electron')

    function changeRemoteURL() {
      const remote = require('electron').remote;
      const servers = remote.getGlobal("servers");
      // console.log("ip:", ip);
      const remoteURLinput = document.getElementById("remoteURLinput");
      console.log(remoteURLinput.value);
      // servers.remoteURL = remoteURLinput.value;

      ipcRenderer.send('changeRemoteURL', remoteURLinput.value);
    }

    function naviToLocal() {
      // alert('Local mode!')
      // const url = "http://localhost:3000/";
      // location.href = url;
      ipcRenderer.send('change-to-local')
    }

    function naviToRemote() {
      // alert('Local mode!')

      // const url = "http://acdc0.asiaa.sinica.edu.tw:47569/";
      // location.href = url;

      //TODO:
      //nofity main process to change the checked status of remote menu
      // const {BrowserWindow} = require('electron').remote
      ipcRenderer.send('change-to-remote')

      // console.log(BrowserWindow);
    }
  </script>

  <div class="flex-container" style="background-color:#81D8D0;height: 600px">
    <div style='width:800px'>
      <div style="margin: 25px;">
        <button type="button" onclick="naviToLocal();">Choose Local mode!</button>
      </div>
      <div style="margin: 25px;">
        <button type="button" onclick="naviToRemote();">Choose Server mode!</button>

      </div>
      <div style="display: flex;margin: 25px;" >
        <div style="width:315px">
          <input width="400" id="remoteURLinput" type="text" style='width:90%'>
        </div>
        <button onclick="changeRemoteURL()">Save remote URL</button>
      </div>
    </div>

  </div>

  <script>
    // You can also require other files to run in this process
    require('./renderer.js')

    const remote = require('electron').remote;
    const ip = remote.getGlobal("servers").remoteURL;
    console.log("ip:", ip);
    const remoteURLinput = document.getElementById("remoteURLinput");
    remoteURLinput.value = ip;
  </script>
</body>

</html>
